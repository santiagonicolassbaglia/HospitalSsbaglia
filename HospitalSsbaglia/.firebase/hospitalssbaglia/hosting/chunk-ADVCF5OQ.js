import{b as F,c as i,d as I,e as w,h as V,i as q,j as R,k as j,l as k,m as T,n as D,o as U,p as z,q as G}from"./chunk-EIZJPDRZ.js";import{a as L}from"./chunk-M4GCIS4F.js";import{d as P,g as N,u as A}from"./chunk-KCUKJPLM.js";import{h as y,i as M}from"./chunk-UHVFW63S.js";import{$a as _,Ea as c,Fa as f,Qa as h,Sa as u,Ua as t,Va as e,Wa as s,_a as b,ab as n,bb as x,ca as C,cb as O,fa as E,ib as S}from"./chunk-GG3ZMLSG.js";function X(a,l){if(a&1&&(t(0,"option",21),n(1),e()),a&2){let g=l.$implicit;u("value",g),c(),x(g)}}function Y(a,l){a&1&&(t(0,"div")(1,"label",22),n(2,"Otra Especialidad:"),e(),s(3,"input",23),e())}function Z(a,l){if(a&1&&(t(0,"div"),n(1),e()),a&2){let g=_();c(),O(" ",g.mensajeError," ")}}var ce=(()=>{let l=class l{constructor(d,o,r){this.authService=d,this.router=o,this.loadingService=r,this.mensajeError="",this.especialidades=["Cardiolog\xEDa","Dermatolog\xEDa","Neurolog\xEDa","Pediatr\xEDa"],this.fb=C(U)}ngOnInit(){this.form=this.fb.group({nombre:["",[i.required,i.minLength(3)]],apellido:["",[i.required,i.minLength(3)]],dni:["",[i.required,i.pattern(/^\d{7,8}$/)]],edad:["",[i.required,i.min(1)]],especialidad:["",i.required],otraEspecialidad:[""],mail:["",[i.required,i.email]],clave:["",[i.required,i.minLength(6)]],imagenes:[null,i.required]})}registrar(){if(this.hasError())return;this.loadingService.show(),setTimeout(()=>{this.loadingService.hide()},5e3);let{nombre:d,apellido:o,dni:r,edad:m,especialidad:p,otraEspecialidad:B,mail:$,clave:H,imagenes:v}=this.form.value,Q=p==="Otra"?B:p,J=Array.isArray(v)?v:[v],K=new N(d,o,r,m,null,Q||null,H,$,J,this.generateUserCode(),null);this.authService.registrar(K).then(()=>{this.router.navigateByUrl("/login")}).catch(W=>{this.mensajeError="Hubo un problema al registrar el usuario. Int\xE9ntalo de nuevo.",console.error("Error al registrar usuario:",W)})}hasError(){return this.form.markAllAsTouched(),this.form.invalid}generateUserCode(){return"some-unique-code"}onFileChange(d){let o=d.target.files;if(o.length>0){let r=Array.from(o).map(m=>m);this.form.patchValue({imagenes:r})}}onEspecialidadChange(d){d.target.value==="Otra"?this.form.get("otraEspecialidad")?.setValidators([i.required]):this.form.get("otraEspecialidad")?.clearValidators(),this.form.get("otraEspecialidad")?.updateValueAndValidity()}};l.\u0275fac=function(o){return new(o||l)(f(A),f(P),f(L))},l.\u0275cmp=E({type:l,selectors:[["app-registro-especialista"]],standalone:!0,features:[S],decls:40,vars:4,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre","type","text"],["for","apellido"],["id","apellido","formControlName","apellido","type","text"],["for","dni"],["id","dni","formControlName","dni","type","text"],["for","edad"],["id","edad","formControlName","edad","type","number"],["for","especialidad"],["id","especialidad","formControlName","especialidad",3,"change"],[3,"value",4,"ngFor","ngForOf"],["value","Otra"],[4,"ngIf"],["for","mail"],["id","mail","formControlName","mail","type","email"],["for","clave"],["id","clave","formControlName","clave","type","password"],["for","imagen"],["id","imagen","type","file","multiple","",1,"buttonSeleccionarArchivo",3,"change"],["type","submit"],[3,"value"],["for","otraEspecialidad"],["id","otraEspecialidad","formControlName","otraEspecialidad","type","text"]],template:function(o,r){if(o&1&&(t(0,"form",0),b("ngSubmit",function(){return r.registrar()}),t(1,"div")(2,"label",1),n(3,"Nombre:"),e(),s(4,"input",2),e(),t(5,"div")(6,"label",3),n(7,"Apellido:"),e(),s(8,"input",4),e(),t(9,"div")(10,"label",5),n(11,"DNI:"),e(),s(12,"input",6),e(),t(13,"div")(14,"label",7),n(15,"Edad:"),e(),s(16,"input",8),e(),t(17,"div")(18,"label",9),n(19,"Especialidad:"),e(),t(20,"select",10),b("change",function(p){return r.onEspecialidadChange(p)}),h(21,X,2,2,"option",11),t(22,"option",12),n(23,"Otra"),e()(),h(24,Y,4,0,"div",13),e(),t(25,"div")(26,"label",14),n(27,"Mail:"),e(),s(28,"input",15),e(),t(29,"div")(30,"label",16),n(31,"Contrase\xF1a:"),e(),s(32,"input",17),e(),t(33,"div")(34,"label",18),n(35,"Imagen de Perfil:"),e(),t(36,"input",19),b("change",function(p){return r.onFileChange(p)}),e()(),t(37,"button",20),n(38,"Registrar"),e(),h(39,Z,2,1,"div",13),e()),o&2){let m;u("formGroup",r.form),c(21),u("ngForOf",r.especialidades),c(3),u("ngIf",((m=r.form.get("especialidad"))==null?null:m.value)==="Otra"),c(15),u("ngIf",r.mensajeError)}},dependencies:[z,V,T,D,F,q,k,I,w,G,R,j,M,y],styles:['form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:10px;background-image:url("./media/medicalutn1-NOQABUCO.jpg");box-shadow:0 2px 4px #0000001a}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:calc(100% - 20px);padding:10px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}input[type=file][_ngcontent-%COMP%]{padding:3px}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}.buttonSeleccionarArchivo[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#495057;font-size:18px}.form-floating[_ngcontent-%COMP%]{margin-bottom:1rem}.estado-registro[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]{margin-top:1rem}.form-signin[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-bottom:1rem;width:100px}a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error[_ngcontent-%COMP%]{color:red}.exito[_ngcontent-%COMP%]{color:green}']});let a=l;return a})();export{ce as a};
