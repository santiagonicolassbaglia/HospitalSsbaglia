import{e as $}from"./chunk-OIK5GHFL.js";import{a as q}from"./chunk-6EX5LFN4.js";import{a as j,d as N,g as W,s as z}from"./chunk-WQDWLB3F.js";import{d as V}from"./chunk-Q3TEWXKA.js";import{h as L,i as D,j as H,k as R,m as B}from"./chunk-TQDNXVMP.js";import{$a as A,Ga as c,Ha as m,Ua as E,Wa as g,Ya as o,Za as r,_a as k,cb as d,db as C,fa as y,fb as s,gb as f,ha as M,hb as O,ia as S,jb as I,kb as w,lb as U,nb as T,pa as _,pb as h,qa as x,qb as F,rb as v,va as P}from"./chunk-75HCPL27.js";import{j as u}from"./chunk-GLKGYJID.js";var J=(()=>{let i=class i{transform(t,e){return t?e===null?t:t.filter(n=>n.esAdmin===e):[]}};i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=S({name:"filtrarAdmin",type:i,pure:!0,standalone:!0});let a=i;return a})();var K=(()=>{let i=class i{constructor(t){this.el=t,this.appHighlight=""}onMouseEnter(){this.highlight(this.appHighlight||"red")}onMouseLeave(){this.highlight("")}highlight(t){this.el.nativeElement.style.backgroundColor=t}};i.\u0275fac=function(e){return new(e||i)(m(P))},i.\u0275dir=M({type:i,selectors:[["","appResaltaTexto",""]],hostBindings:function(e,n){e&1&&d("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{appHighlight:"appHighlight"},standalone:!0});let a=i;return a})();function Q(a,i){if(a&1){let l=A();o(0,"tr")(1,"td"),s(2),r(),o(3,"td"),s(4),r(),o(5,"td"),s(6),h(7,"date"),r(),o(8,"td")(9,"input",11),d("change",function(){let e=_(l).$implicit,n=C();return x(n.cambiarAdmin(e))}),r()(),o(10,"td")(11,"button",12),d("click",function(){let e=_(l).$implicit,n=C();return x(n.eliminarUsuario(e))}),s(12,"Eliminar"),r()()()}if(a&2){let l=i.$implicit;c(2),f(l.nombre),c(2),f(l.mail),c(2),f(v(7,4,l.lastLogin,"dd/MM/yyyy HH:mm")),c(3),g("checked",l.esAdmin)}}function X(a,i){a&1&&k(0,"app-estadisticas")}var pt=(()=>{let i=class i{constructor(t,e){this.router=t,this.authService=e,this.totalUsuarios=0,this.mostrarEstadisticas=!1,this.mostrarSoloAdmins=null}ngOnInit(){this.usuarios$=this.authService.getAllUsers(),this.usuarios$.subscribe(t=>{this.totalUsuarios=t.length})}cambiarEstadoAdmin(t,e){return u(this,null,function*(){try{yield this.authService.cambiarEstadoAdmin(t,e),console.log(`Estado de admin cambiado para usuario con ID ${t}`),this.usuarios$=this.authService.getAllUsers()}catch(n){console.error("Error al cambiar estado de admin:",n)}})}cerrarSesion(){this.authService.logout().then(()=>{console.log("Sesi\xF3n cerrada correctamente"),this.router.navigateByUrl("/login")}).catch(t=>{console.error("Error al cerrar sesi\xF3n:",t)})}eliminarUsuario(t){return u(this,null,function*(){try{yield this.authService.eliminarUsuario(t.uid),console.log(`Usuario con UID ${t.uid} eliminado`)}catch(e){console.error("Error al eliminar el usuario:",e)}})}cambiarAdmin(t){return u(this,null,function*(){try{t.esAdmin=!t.esAdmin,yield this.authService.cambiarEstadoAdmin(t.mail,t.esAdmin),console.log(`Estado de admin cambiado para usuario con email ${t.mail}`)}catch(e){console.error("Error al cambiar estado de admin:",e)}})}mostrarOcultarEstadisticas(){this.mostrarEstadisticas=!this.mostrarEstadisticas}};i.\u0275fac=function(e){return new(e||i)(m($),m(V))},i.\u0275cmp=y({type:i,selectors:[["app-lista-usuarios-ingresados"]],standalone:!0,features:[T],decls:34,vars:9,consts:[[1,"home-container"],[1,"header"],["appResaltaTexto","",1,"btn-logout",3,"click"],[1,"table-container"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"table"],[4,"ngFor","ngForOf"],["colspan","5"],[1,"botonEstadisticas-contenedor"],["appResaltaTexto","",1,"botonEstadisticas",3,"click"],[4,"ngIf"],["type","checkbox",3,"change","checked"],["appResaltaTexto","",1,"botonEliminar",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Administraci\xF3n de Usuarios"),r(),o(4,"button",2),d("click",function(){return n.cerrarSesion()}),s(5,"Cerrar sesi\xF3n"),r()(),o(6,"div",3)(7,"label")(8,"input",4),U("ngModelChange",function(b){return w(n.mostrarSoloAdmins,b)||(n.mostrarSoloAdmins=b),b}),r(),s(9," Mostrar solo administradores "),r(),o(10,"table",5)(11,"thead")(12,"tr")(13,"th"),s(14,"Nombre"),r(),o(15,"th"),s(16,"Email"),r(),o(17,"th"),s(18,"\xDAltimo inicio de sesi\xF3n"),r(),o(19,"th"),s(20,"Es Admin"),r(),o(21,"th"),s(22,"Acciones"),r()()(),o(23,"tbody"),E(24,Q,13,7,"tr",6),h(25,"async"),h(26,"filtrarAdmin"),o(27,"tr")(28,"td",7),s(29),r()()()()(),o(30,"div",8)(31,"button",9),d("click",function(){return n.mostrarOcultarEstadisticas()}),s(32,"Ver Estad\xEDsticas"),r(),E(33,X,1,0,"app-estadisticas",10),r()()),e&2&&(c(8),I("ngModel",n.mostrarSoloAdmins),c(16),g("ngForOf",v(26,6,F(25,4,n.usuarios$),n.mostrarSoloAdmins)),c(5),O("Cantidad de usuarios en total: ",n.totalUsuarios,""),c(4),g("ngIf",n.mostrarEstadisticas))},dependencies:[B,L,D,H,R,q,J,z,j,N,W,K],styles:[".home-container[_ngcontent-%COMP%]{padding:20px;background-color:#f2f2f2;border-radius:8px;box-shadow:0 0 10px #0000001a}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333}.btn-logout[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff;border:none;padding:10px 20px;cursor:pointer;border-radius:4px;transition:background-color .3s ease}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#f33}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700;text-align:left;color:#333}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#666}.botonEstadisticas[_ngcontent-%COMP%]{background-color:#09435ff8;color:#fff;border:none;cursor:pointer;border-radius:4px;transition:background-color .3s ease;font-size:18px;padding:15px 30px;margin:0 auto}.botonEstadisticas-contenedor[_ngcontent-%COMP%]{justify-content:center;align-items:center;margin-top:2rem}.botonEliminar[_ngcontent-%COMP%]{background-color:#6c0000;color:#fff;border:none;padding:10px 15px;cursor:pointer;border-radius:4px;transition:background-color .3s ease}"]});let a=i;return a})();export{pt as a};
