import{a as G}from"./chunk-QOMEHSRK.js";import{a as B}from"./chunk-ZQLAYJMF.js";import{b as F,c as u,d as w,e as j,h as k,i as A,j as L,m as D,r as V,s as U,t as z}from"./chunk-QWB637DO.js";import{e as M}from"./chunk-6EJ7X627.js";import{a as O,d as N}from"./chunk-J4KM255L.js";import{i as q}from"./chunk-NCUWAZGR.js";import{Ga as m,Ha as S,Ua as p,Wa as s,Ya as i,Za as t,_a as f,ca as I,cb as y,db as g,fa as R,fb as d,hb as T,nb as P}from"./chunk-GBDBB4LJ.js";function H(e,l){e&1&&(i(0,"small",24),d(1,"El nombre es requerido."),t())}function Q(e,l){e&1&&(i(0,"small",24),d(1,"El nombre debe tener al menos 3 caracteres."),t())}function $(e,l){if(e&1&&(i(0,"div"),p(1,H,2,0,"small",23)(2,Q,2,0,"small",23),t()),e&2){let r,n,o=g();m(),s("ngIf",(r=o.form.get("nombre"))==null||r.errors==null?null:r.errors.required),m(),s("ngIf",(n=o.form.get("nombre"))==null||n.errors==null?null:n.errors.minlength)}}function J(e,l){e&1&&(i(0,"small",24),d(1,"El apellido es requerido."),t())}function K(e,l){e&1&&(i(0,"small",24),d(1,"El apellido debe tener al menos 3 caracteres."),t())}function W(e,l){if(e&1&&(i(0,"div"),p(1,J,2,0,"small",23)(2,K,2,0,"small",23),t()),e&2){let r,n,o=g();m(),s("ngIf",(r=o.form.get("apellido"))==null||r.errors==null?null:r.errors.required),m(),s("ngIf",(n=o.form.get("apellido"))==null||n.errors==null?null:n.errors.minlength)}}function X(e,l){e&1&&(i(0,"small",24),d(1,"El DNI es requerido."),t())}function Y(e,l){e&1&&(i(0,"small",24),d(1,"El DNI debe tener 7 u 8 d\xEDgitos."),t())}function Z(e,l){if(e&1&&(i(0,"div"),p(1,X,2,0,"small",23)(2,Y,2,0,"small",23),t()),e&2){let r,n,o=g();m(),s("ngIf",(r=o.form.get("dni"))==null||r.errors==null?null:r.errors.required),m(),s("ngIf",(n=o.form.get("dni"))==null||n.errors==null?null:n.errors.pattern)}}function ee(e,l){e&1&&(i(0,"small",24),d(1,"La edad es requerida."),t())}function te(e,l){e&1&&(i(0,"small",24),d(1,"La edad debe ser mayor a 0."),t())}function ne(e,l){if(e&1&&(i(0,"div"),p(1,ee,2,0,"small",23)(2,te,2,0,"small",23),t()),e&2){let r,n,o=g();m(),s("ngIf",(r=o.form.get("edad"))==null||r.errors==null?null:r.errors.required),m(),s("ngIf",(n=o.form.get("edad"))==null||n.errors==null?null:n.errors.min)}}function ie(e,l){e&1&&(i(0,"small",24),d(1,"La obra social es requerida."),t())}function re(e,l){if(e&1&&(i(0,"div"),p(1,ie,2,0,"small",23),t()),e&2){let r,n=g();m(),s("ngIf",(r=n.form.get("obraSocial"))==null||r.errors==null?null:r.errors.required)}}function le(e,l){e&1&&(i(0,"small",24),d(1,"El correo electr\xF3nico es requerido."),t())}function oe(e,l){e&1&&(i(0,"small",24),d(1,"El correo electr\xF3nico no es v\xE1lido."),t())}function ae(e,l){if(e&1&&(i(0,"div"),p(1,le,2,0,"small",23)(2,oe,2,0,"small",23),t()),e&2){let r,n,o=g();m(),s("ngIf",(r=o.form.get("mail"))==null||r.errors==null?null:r.errors.required),m(),s("ngIf",(n=o.form.get("mail"))==null||n.errors==null?null:n.errors.email)}}function me(e,l){e&1&&(i(0,"small",24),d(1,"La contrase\xF1a es requerida."),t())}function de(e,l){e&1&&(i(0,"small",24),d(1,"La contrase\xF1a debe tener al menos 6 caracteres."),t())}function se(e,l){if(e&1&&(i(0,"div"),p(1,me,2,0,"small",23)(2,de,2,0,"small",23),t()),e&2){let r,n,o=g();m(),s("ngIf",(r=o.form.get("clave"))==null||r.errors==null?null:r.errors.required),m(),s("ngIf",(n=o.form.get("clave"))==null||n.errors==null?null:n.errors.minlength)}}function pe(e,l){e&1&&(i(0,"small",24),d(1,"Por favor, selecciona al menos una imagen."),t())}function ue(e,l){if(e&1&&(i(0,"div"),p(1,pe,2,0,"small",23),t()),e&2){let r,n=g();m(),s("ngIf",(r=n.form.get("imagenes"))==null||r.errors==null?null:r.errors.required)}}function ce(e,l){if(e&1&&(i(0,"div",25),d(1),t()),e&2){let r=g();m(),T(" ",r.mensajeError," ")}}var Te=(()=>{let l=class l{constructor(n,o,a){this.authService=n,this.router=o,this.loadingService=a,this.mensajeError="",this.captchaVerified=!1,this.fb=I(V)}ngOnInit(){this.form=this.fb.group({nombre:["",[u.required,u.minLength(3)]],apellido:["",[u.required,u.minLength(3)]],dni:["",[u.required,u.pattern(/^\d{7,8}$/)]],edad:["",[u.required,u.min(1)]],obraSocial:[""],especialidad:[""],mail:["",[u.required,u.email]],clave:["",[u.required,u.minLength(6)]],imagenes:[null,u.required]})}registrar(){if(this.form.invalid)return;if(!this.captchaVerified){this.mensajeError="Por favor, resuelve el captcha primero.";return}this.loadingService.show(),setTimeout(()=>{this.loadingService.hide()},6e3);let{nombre:n,apellido:o,dni:a,edad:c,obraSocial:_,especialidad:v,mail:x,clave:h,imagenes:C}=this.form.value,E=new O("",n,o,a,c,_||null,v?[v]:[],h,x,C,this.generateUserCode(),null,!1);this.authService.registrar(E).then(()=>{this.router.navigateByUrl("/login")}).catch(b=>{b.code==="auth/email-already-in-use"?this.mensajeError="El correo electr\xF3nico ya est\xE1 en uso. Por favor, use otro correo.":this.mensajeError="Hubo un problema al registrar el usuario. Int\xE9ntalo de nuevo.",console.error("Error al registrar usuario:",b)})}hasError(){return this.form.markAllAsTouched(),this.form.invalid}generateUserCode(){return"some-unique-code"}onFileChange(n){let o=n.target.files;if(o.length>0){let a=Array.from(o).map(c=>c);this.form.patchValue({imagenes:a})}}onCaptchaResolved(n){this.captchaVerified=n,this.mensajeError=n?"":"Captcha incorrecto. Por favor, int\xE9ntalo de nuevo."}};l.\u0275fac=function(o){return new(o||l)(S(N),S(M),S(B))},l.\u0275cmp=R({type:l,selectors:[["app-registro"]],standalone:!0,features:[P],decls:55,vars:10,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre","type","text"],[4,"ngIf"],[1,"form-group"],["for","apellido"],["id","apellido","formControlName","apellido","type","text"],["for","dni"],["id","dni","formControlName","dni","type","text"],["for","edad"],["id","edad","formControlName","edad","type","number"],["for","obraSocial"],["id","obraSocial","formControlName","obraSocial","type","text"],["for","mail"],["id","mail","formControlName","mail","type","email"],["for","clave"],["id","clave","formControlName","clave","type","password"],["for","imagenes"],["id","imagenes","type","file","multiple","",1,"buttonSeleccionarArchivo",3,"change"],[3,"captchaResolved"],["type","submit"],["class","error-message",4,"ngIf"],["class","error",4,"ngIf"],[1,"error"],[1,"error-message"]],template:function(o,a){if(o&1&&(i(0,"div",0)(1,"h2"),d(2,"Registro"),t(),i(3,"form",1),y("ngSubmit",function(){return a.registrar()}),i(4,"label",2),d(5,"Nombre:"),t(),f(6,"input",3),p(7,$,3,2,"div",4),i(8,"div",5)(9,"label",6),d(10,"Apellido:"),t(),f(11,"input",7),p(12,W,3,2,"div",4),t(),i(13,"div",5)(14,"label",8),d(15,"DNI:"),t(),f(16,"input",9),p(17,Z,3,2,"div",4),t(),i(18,"div",5)(19,"label",10),d(20,"Edad:"),t(),f(21,"input",11),p(22,ne,3,2,"div",4),t(),i(23,"div",5)(24,"label",12),d(25,"Obra Social"),t(),f(26,"input",13),p(27,re,2,1,"div",4),i(28,"div",5)(29,"label",14),d(30,"Correo Electr\xF3nico"),t(),f(31,"input",15),p(32,ae,3,2,"div",4),i(33,"div",5)(34,"label",16),d(35,"Contrase\xF1a"),t(),f(36,"input",17),p(37,se,3,2,"div",4),i(38,"div",5)(39,"label",18),d(40,"Im\xE1genes de Perfil"),t(),i(41,"input",19),y("change",function(_){return a.onFileChange(_)}),t(),p(42,ue,2,1,"div",4),f(43,"br")(44,"br")(45,"br"),i(46,"app-captcha",20),y("captchaResolved",function(_){return a.onCaptchaResolved(_)}),t(),f(47,"br")(48,"br")(49,"br"),i(50,"button",21),d(51,"Registrar"),t(),f(52,"br")(53,"br"),p(54,ce,2,1,"div",22),t()()()()()()),o&2){let c,_,v,x,h,C,E,b;m(3),s("formGroup",a.form),m(4),s("ngIf",((c=a.form.get("nombre"))==null?null:c.invalid)&&((c=a.form.get("nombre"))==null?null:c.touched)),m(5),s("ngIf",((_=a.form.get("apellido"))==null?null:_.invalid)&&((_=a.form.get("apellido"))==null?null:_.touched)),m(5),s("ngIf",((v=a.form.get("dni"))==null?null:v.invalid)&&((v=a.form.get("dni"))==null?null:v.touched)),m(5),s("ngIf",((x=a.form.get("edad"))==null?null:x.invalid)&&((x=a.form.get("edad"))==null?null:x.touched)),m(5),s("ngIf",((h=a.form.get("obraSocial"))==null?null:h.invalid)&&((h=a.form.get("obraSocial"))==null?null:h.touched)),m(5),s("ngIf",((C=a.form.get("mail"))==null?null:C.invalid)&&((C=a.form.get("mail"))==null?null:C.touched)),m(5),s("ngIf",((E=a.form.get("clave"))==null?null:E.invalid)&&((E=a.form.get("clave"))==null?null:E.touched)),m(5),s("ngIf",((b=a.form.get("imagenes"))==null?null:b.invalid)&&((b=a.form.get("imagenes"))==null?null:b.touched)),m(12),s("ngIf",a.mensajeError)}},dependencies:[U,k,F,A,w,j,z,L,D,q,G],styles:['form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:10px;background-image:url("./media/medicalutn1-NOQABUCO.jpg");box-shadow:0 2px 4px #0000001a}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:calc(100% - 20px);padding:10px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}input[type=file][_ngcontent-%COMP%]{padding:3px}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}button[type=submit][_ngcontent-%COMP%]:disabled:hover{background-color:#ccc}button[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#f44336;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.buttonSeleccionarArchivo[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.botonRegistroEspecialista[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.error[_ngcontent-%COMP%]{color:red}']});let e=l;return e})();export{Te as a};
