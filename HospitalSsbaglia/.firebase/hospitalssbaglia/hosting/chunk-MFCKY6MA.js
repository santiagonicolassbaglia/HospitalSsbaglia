import{y as d}from"./chunk-W5EYEMU2.js";import{Y as h,ba as u,r as a}from"./chunk-75HCPL27.js";import{a as l,j as n}from"./chunk-GLKGYJID.js";var m=(()=>{let s=class s{constructor(e){this.firestore=e,this.PATH="Turnos",this.obtenerTurnosDisponibles=t=>this.firestore.collection("Turnos",r=>r.where("especialista","==",t)).valueChanges()}getTurnos(){return this.firestore.collection(this.PATH).valueChanges().pipe(a(e=>e.map(t=>(t.fechaHora=t.fechaHora.toDate?t.fechaHora.toDate():new Date(t.fechaHora),t))))}getTurnosByPaciente(e){return this.firestore.collection(this.PATH,t=>t.where("pacienteId","==",e)).valueChanges()}crearTurno(e){return n(this,null,function*(){let t=this.firestore.createId();e.id=t;let r=Object.fromEntries(Object.entries(e).filter(([i,o])=>o!==void 0));return this.firestore.collection(this.PATH).doc(t).set(r)})}actualizarTurno(e){return n(this,null,function*(){let t=Object.fromEntries(Object.entries(e).filter(([r,i])=>i!==void 0));return this.firestore.collection(this.PATH).doc(e.id).update(t)})}eliminarTurno(e){return n(this,null,function*(){return this.firestore.collection(this.PATH).doc(e).delete()})}getTurnosByEspecialista(e){return this.firestore.collection(this.PATH,t=>t.where("especialistaId","==",e)).snapshotChanges().pipe(a(t=>t.map(r=>{let i=r.payload.doc.data(),o=r.payload.doc.id;return l({id:o},i)})))}cargarHistoriasClinicas(e){return this.firestore.collection("historiasClinicas").snapshotChanges().pipe(a(t=>{let r=t.map(i=>{let o=i.payload.doc.data(),p=i.payload.doc.id;return l({id:p},o)});return e.map(i=>(i.fechaHora=this.convertTimestampToDate(i.fechaHora),i.historiaClinica=r.find(o=>o.turnoId===i.id),i))}))}convertTimestampToDate(e){return e instanceof Date?e:e.toDate()}obtenerEncuesta(e){return this.firestore.collection("Encuestas").doc(e).valueChanges()}obtenerRese\u00F1a(e){return this.firestore.collection("comentario").doc(e).valueChanges()}obtenerComentario(e){return this.firestore.collection("comentario").doc(e).valueChanges()}obtenerEspecialistasPorEspecialidad(e){return this.firestore.collection("Usuarios",t=>t.where("especialidad","array-contains",e)).valueChanges()}getTurnosByUsuarioId(e){return this.firestore.collection(this.PATH,t=>t.where("idusuario","==",e)).valueChanges()}getTurnosByDniUsuario(e){return this.firestore.collection(this.PATH,t=>t.where("dniUsuario","==",e)).valueChanges()}obtenerFechasDisponibles(e){return this.firestore.collection("Especialistas").doc(e).valueChanges().pipe(a(t=>t.fechasDisponibles))}obtenerEspecialidades(){return this.firestore.collection("Especialidades").valueChanges().pipe(a(e=>e.map(t=>t.nombre)))}obtenerEspecialistas(){return this.firestore.collection("Usuarios",e=>e.where("especialista","==",!0)).valueChanges()}cancelarTurno(e){return this.firestore.collection(this.PATH).doc(e).delete()}};s.\u0275fac=function(t){return new(t||s)(u(d))},s.\u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})();export{m as a};
