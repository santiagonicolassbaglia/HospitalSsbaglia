import{a as U}from"./chunk-EZV5ANEG.js";import{a as q}from"./chunk-5MSEPCIV.js";import{a as R,b as T,d as N,e as V,f as A,g as G,h as z,q as B,s as D}from"./chunk-NY2CMLFD.js";import{e as j,f as F}from"./chunk-7PKDRLGN.js";import{d as W}from"./chunk-BRXFPUIU.js";import{h as L,i as I}from"./chunk-AZLH7A3O.js";import{$a as E,Da as O,Ga as m,Ha as u,Ua as C,Wa as f,Ya as i,Za as o,_a as s,cb as p,db as y,eb as k,fa as M,fb as a,gb as x,jb as h,kb as b,lb as _,nb as w,pa as S,qa as P}from"./chunk-QPVJROBB.js";import{h as v}from"./chunk-DEPBX7UX.js";function J(l,c){if(l&1&&(i(0,"div",22),a(1),o()),l&2){let d=y();m(),x(d.mensajeError)}}function Q(l,c){if(l&1){let d=E();i(0,"div",23),p("click",function(){let n=S(d).$implicit,e=y();return P(e.autoComplete(n))}),s(1,"img",24),i(2,"span"),a(3),o()()}if(l&2){let d=c.$implicit;m(),k("alt","Imagen de ",d.mail,""),f("src",d.imagenes[0],O),m(2),x(d.apellido)}}var re=(()=>{let c=class c{constructor(t,n,e){this.router=t,this.authService=n,this.loadingService=e,this.mail="",this.clave="",this.mensajeError="",this.recordarme=!1,this.captchaVerified=!1,this.usuariosPredeterminados=[]}ngOnInit(){this.authService.esAdmin=!1;let t=localStorage.getItem("usuarioGuardado");if(t){let n=JSON.parse(t);this.mail=n.mail,this.clave=n.clave,this.recordarme=!0}this.authService.getAllUsers().subscribe(n=>{console.log(n),this.usuariosPredeterminados=n.filter(e=>e.mail==="usuario1@gmail.com"||e.mail==="especialista1@gmail.com"||e.mail==="usuario2@gmail.com"||e.mail==="usuario3@gmail.com"||e.mail==="Admin@gmail.com"||e.mail==="especialista2@gmail.com")})}login(){return v(this,null,function*(){if(!this.captchaVerified){this.mensajeError="Por favor, resuelve el captcha primero.";return}this.loadingService.show(),setTimeout(()=>{this.loadingService.hide()},3e3);try{yield this.authService.login(this.mail,this.clave),this.router.navigateByUrl("home")}catch(t){console.log("Error de inicio de sesi\xF3n:",t),t.message==="El especialista no ha sido aprobado."?this.mensajeError="Su cuenta a\xFAn no ha sido aprobada por el administrador.":this.mensajeError="El correo electr\xF3nico o la contrase\xF1a son incorrectos"}})}usuarioPorDefecto(t,n){this.mail=t,this.clave=n,this.authService.esAdmin=!0}loginWithGoogle(){return v(this,null,function*(){try{yield this.authService.loginWithGoogle(),this.router.navigateByUrl("/home")}catch(t){console.log("Error de inicio de sesi\xF3n con Google:",t)}})}onCaptchaResolved(t){this.captchaVerified=t,this.mensajeError=t?"":"Captcha incorrecto. Por favor, int\xE9ntalo de nuevo."}autoComplete(t){this.mail=t.mail,this.clave="123456"}usuarioPorDefectoOriginal(){this.mail="santiii@gmail.com",this.clave="123456",this.authService.esAdmin=!0}};c.\u0275fac=function(n){return new(n||c)(u(j),u(W),u(q))},c.\u0275cmp=M({type:c,selectors:[["app-login"]],standalone:!0,features:[w],decls:37,vars:5,consts:[[1,"form-signin"],[3,"ngSubmit"],[1,"h3","mb-3","fw-normal","text-center"],[1,"form-floating","mb-3"],["type","email","id","email","placeholder","Email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],[1,"form-floating","mb-3","text-center","mt-3"],["type","password","id","claveLogin","placeholder","Contrase\xF1a","name","clave","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","claveLogin"],[3,"captchaResolved"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[1,"d-grid","mb-3","text-center","mt-3"],["type","submit",1,"btn","btn-primary"],[1,"form-check","mb-3","text-center"],["type","checkbox","value","","id","recordarme","name","recordarme",1,"form-check-input",3,"ngModelChange","ngModel"],["for","recordarme",1,"form-check-label"],[1,"text-center","mt-3"],["type","button",1,"btn","btn-lg","btn-outline-primary",3,"click"],[1,"fab","fa-google","me-2"],["routerLink","/homeRegistro",1,"btn","btn-lg","btn-outline-primary"],[1,"usuarios-predeterminados","mt-4"],["class","usuario-predeterminado",3,"click",4,"ngFor","ngForOf"],[1,"alert","alert-danger","text-center","mt-3"],[1,"usuario-predeterminado",3,"click"],[3,"src","alt"]],template:function(n,e){n&1&&(i(0,"main",0)(1,"form",1),p("ngSubmit",function(){return e.login()}),i(2,"h1",2),a(3,"Ingresar"),o(),i(4,"div",3)(5,"input",4),_("ngModelChange",function(r){return b(e.mail,r)||(e.mail=r),r}),o(),i(6,"label",5),a(7,"Email"),o()(),i(8,"div",6)(9,"input",7),_("ngModelChange",function(r){return b(e.clave,r)||(e.clave=r),r}),o(),i(10,"label",8),a(11,"Contrase\xF1a"),o()(),s(12,"br")(13,"br"),i(14,"app-captcha",9),p("captchaResolved",function(r){return e.onCaptchaResolved(r)}),o(),s(15,"br"),C(16,J,2,1,"div",10),s(17,"br"),i(18,"div",11)(19,"button",12),a(20,"Iniciar sesi\xF3n"),o()(),s(21,"br"),i(22,"div",13)(23,"input",14),_("ngModelChange",function(r){return b(e.recordarme,r)||(e.recordarme=r),r}),o(),i(24,"label",15),a(25,"Recordarme"),o()(),s(26,"hr"),i(27,"div",16)(28,"button",17),p("click",function(){return e.loginWithGoogle()}),s(29,"i",18),a(30," Iniciar sesi\xF3n con Google "),o()(),s(31,"hr"),i(32,"div",16)(33,"button",19),a(34,"Registrarme"),o()(),i(35,"div",20),C(36,Q,4,4,"div",21),o()()()),n&2&&(m(5),h("ngModel",e.mail),m(4),h("ngModel",e.clave),m(7),f("ngIf",e.mensajeError),m(7),h("ngModel",e.recordarme),m(13),f("ngForOf",e.usuariosPredeterminados))},dependencies:[D,z,T,R,N,V,B,G,A,F,I,U,L],styles:['.form-signin[_ngcontent-%COMP%]{width:100%;height:100vh;padding:20px;background-image:url("./media/medicalutn1-NOQABUCO.jpg");background-size:cover;background-repeat:no-repeat;background-attachment:fixed;background-position:center;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff}.form-signin[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#000000b3;padding:7rem;border-radius:10px;width:100%;max-width:400px;box-shadow:0 0 10px #00000080}.form-control[_ngcontent-%COMP%]{height:50px;font-size:18px;background-color:#ffffff1a;border:1px solid rgba(255,255,255,.3);color:#fff}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff3;border-color:#007bff;color:#fff}.form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ccc;font-size:16px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-outline-primary[_ngcontent-%COMP%]{height:50px;font-size:18px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover, .btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.alert-danger[_ngcontent-%COMP%]{color:#f8d7da;background-color:#721c24;border-color:#f5c6cb}.usuarios-predeterminados[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.usuario-predeterminado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;cursor:pointer;width:70px;margin:0 10px;transition:transform .2s}.usuario-predeterminado[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.usuario-predeterminado[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px;margin-bottom:5px;border:2px solid #007bff}.usuario-predeterminado[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px;text-align:center}']});let l=c;return l})();export{re as a};
