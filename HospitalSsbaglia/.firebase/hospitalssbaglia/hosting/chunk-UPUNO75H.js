import{b as N,c as i,d as w,e as k,h as A,i as F,j as I,k as R,o as j,p as q,q as T}from"./chunk-73WKMPDJ.js";import{a as U}from"./chunk-ZTAWAFJC.js";import{e as _,f as M,i as O,w as P}from"./chunk-F6H7HBO4.js";import{i as y}from"./chunk-QHBLLVFO.js";import{Fa as c,Ga as p,Ta as x,Va as g,Xa as t,Ya as e,Za as a,bb as f,ca as h,cb as C,db as r,fa as v,fb as S,lb as E}from"./chunk-EA3IIICE.js";function H(m,l){if(m&1&&(t(0,"div",22),r(1),e()),m&2){let z=C();c(),S(" ",z.mensajeError," ")}}var oe=(()=>{let l=class l{constructor(d,n,o){this.authService=d,this.router=n,this.loadingService=o,this.mensajeError="",this.fb=h(j)}ngOnInit(){this.form=this.fb.group({nombre:["",[i.required,i.minLength(3)]],apellido:["",[i.required,i.minLength(3)]],dni:["",[i.required,i.pattern(/^\d{7,8}$/)]],edad:["",[i.required,i.min(1)]],obraSocial:[""],especialidad:[""],mail:["",[i.required,i.email]],clave:["",[i.required,i.minLength(6)]],imagenes:[null,i.required]})}registrar(){if(this.form.invalid)return;this.loadingService.show(),setTimeout(()=>{this.loadingService.hide()},6e3);let{nombre:d,apellido:n,dni:o,edad:s,obraSocial:u,especialidad:D,mail:L,clave:V,imagenes:G}=this.form.value,B=new O(d,n,o,s,u||null,D||null,V,L,G,this.generateUserCode(),null,null);this.authService.registrar(B).then(()=>{this.router.navigateByUrl("/login")}).catch(b=>{b.code==="auth/email-already-in-use"?this.mensajeError="El correo electr\xF3nico ya est\xE1 en uso. Por favor, use otro correo.":this.mensajeError="Hubo un problema al registrar el usuario. Int\xE9ntalo de nuevo.",console.error("Error al registrar usuario:",b)})}hasError(){return this.form.markAllAsTouched(),this.form.invalid}generateUserCode(){return"some-unique-code"}onFileChange(d){let n=d.target.files;if(n.length>0){let o=Array.from(n).map(s=>s);this.form.patchValue({imagenes:o})}}};l.\u0275fac=function(n){return new(n||l)(p(P),p(_),p(U))},l.\u0275cmp=v({type:l,selectors:[["app-registro"]],standalone:!0,features:[E],decls:44,vars:2,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["id","nombre","formControlName","nombre","type","text"],["for","apellido"],["id","apellido","formControlName","apellido","type","text"],["for","dni"],["id","dni","formControlName","dni","type","text"],["for","edad"],["id","edad","formControlName","edad","type","number"],["for","obraSocial"],["id","obraSocial","formControlName","obraSocial","type","text"],["for","mail"],["id","mail","formControlName","mail","type","email"],["for","clave"],["id","clave","formControlName","clave","type","password"],["for","imagenes"],["id","imagenes","type","file","multiple","",1,"buttonSeleccionarArchivo",3,"change"],["type","submit"],["routerLink","/registro-especialista",1,"btn","botonRegistroEspecialista"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(n,o){n&1&&(t(0,"div",0)(1,"h2"),r(2,"Registro"),e(),t(3,"form",1),f("ngSubmit",function(){return o.registrar()}),t(4,"div",2)(5,"label",3),r(6,"Nombre"),e(),a(7,"input",4),e(),t(8,"div",2)(9,"label",5),r(10,"Apellido"),e(),a(11,"input",6),e(),t(12,"div",2)(13,"label",7),r(14,"DNI"),e(),a(15,"input",8),e(),t(16,"div",2)(17,"label",9),r(18,"Edad"),e(),a(19,"input",10),e(),t(20,"div",2)(21,"label",11),r(22,"Obra Social"),e(),a(23,"input",12),e(),t(24,"div",2)(25,"label",13),r(26,"Correo Electr\xF3nico"),e(),a(27,"input",14),e(),t(28,"div",2)(29,"label",15),r(30,"Contrase\xF1a"),e(),a(31,"input",16),e(),t(32,"div",2)(33,"label",17),r(34,"Im\xE1genes de Perfil"),e(),t(35,"input",18),f("change",function(u){return o.onFileChange(u)}),e()(),t(36,"button",19),r(37,"Registrar"),e(),a(38,"br")(39,"br"),t(40,"div")(41,"button",20),r(42,"Registrarse como especialista"),e()()(),x(43,H,2,1,"div",21),e()),n&2&&(c(3),g("formGroup",o.form),c(40),g("ngIf",o.mensajeError))},dependencies:[q,A,N,F,w,k,T,I,R,y,M],styles:['form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:10px;background-image:url("./media/medicalutn1-NOQABUCO.jpg");box-shadow:0 2px 4px #0000001a}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:calc(100% - 20px);padding:10px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}input[type=file][_ngcontent-%COMP%]{padding:3px}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}button[type=submit][_ngcontent-%COMP%]:disabled:hover{background-color:#ccc}button[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#f44336;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.buttonSeleccionarArchivo[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.botonRegistroEspecialista[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}']});let m=l;return m})();export{oe as a};
