import{a as w}from"./chunk-UXX4BWXT.js";import{s as M}from"./chunk-QWB637DO.js";import{d as O}from"./chunk-J4KM255L.js";import{h as T,i as y,k as I}from"./chunk-NCUWAZGR.js";import{$a as x,Ga as s,Ha as h,Ua as p,Wa as m,Ya as c,Za as r,cb as g,db as u,fa as E,fb as d,hb as l,nb as C,ob as S,pa as f,qa as _,qb as F}from"./chunk-GBDBB4LJ.js";import{h as v}from"./chunk-DEPBX7UX.js";function k(n,o){if(n&1){let e=x();c(0,"button",6),g("click",function(){let i=f(e).$implicit,a=u();return a.filtroEspecialidad=i,_(a.aplicarFiltro())}),d(1),r()}if(n&2){let e=o.$implicit;s(),l(" ",e," ")}}function P(n,o){if(n&1){let e=x();c(0,"button",6),g("click",function(){let i=f(e).$implicit,a=u();return a.filtroEspecialista=i.id,_(a.aplicarFiltro())}),d(1),r()}if(n&2){let e=o.$implicit;s(),l(" ",e.nombre," ")}}function A(n,o){if(n&1){let e=x();c(0,"button",6),g("click",function(){f(e);let i=u().$implicit,a=u();return _(a.cancelarTurno(i,"Raz\xF3n de cancelaci\xF3n"))}),d(1,"Cancelar Turno"),r()}}function V(n,o){if(n&1&&(c(0,"div",7)(1,"p"),d(2),r(),c(3,"p"),d(4),r(),c(5,"p"),d(6),r(),c(7,"p"),d(8),S(9,"date"),r(),c(10,"p"),d(11),r(),p(12,A,2,0,"button",8),r()),n&2){let e=o.$implicit;s(2),l("Especialidad: ",e.especialidad,""),s(2),l("Especialista: ",e.especialistaNombre,""),s(2),l("Paciente: ",e.pacienteNombre,""),s(2),l("Fecha y Hora: ",F(9,6,e.fechaHora,"dd/MM/yyyy HH:mm"),""),s(3),l("Estado: ",e.estado,""),s(),m("ngIf",e.estado!=="confirmado"&&e.estado!=="realizado"&&e.estado!=="cancelado")}}var j=(()=>{let o=class o{constructor(t,i){this.authService=t,this.turnoService=i,this.turnos=[],this.turnosFiltrados=[],this.especialidades=[],this.especialistas=[],this.filtroEspecialidad="",this.filtroEspecialista=""}ngOnInit(){return v(this,null,function*(){this.turnoService.getTurnos().subscribe(t=>{this.turnos=t,this.turnosFiltrados=t,this.obtenerEspecialidadesYEspecialistas(t)})})}obtenerEspecialidadesYEspecialistas(t){let i=new Set,a=new Set;t.forEach(b=>{i.add(b.especialidad),a.add({id:b.especialistaId,nombre:b.especialistaNombre})}),this.especialidades=Array.from(i),this.especialistas=Array.from(a)}aplicarFiltro(){this.turnosFiltrados=this.turnos.filter(t=>(this.filtroEspecialidad===""||t.especialidad===this.filtroEspecialidad)&&(this.filtroEspecialista===""||t.especialistaId===this.filtroEspecialista))}cancelarTurno(t,i){return v(this,null,function*(){t.estado!=="confirmado"&&t.estado!=="realizado"&&t.estado!=="cancelado"&&(t.estado="cancelado",t.comentario=i,yield this.turnoService.actualizarTurno(t))})}};o.\u0275fac=function(i){return new(i||o)(h(O),h(w))},o.\u0275cmp=E({type:o,selectors:[["app-turnos-administrador"]],standalone:!0,features:[C],decls:7,vars:3,consts:[[1,"filtros"],[1,"filtro-especialidad"],[3,"click",4,"ngFor","ngForOf"],[1,"filtro-especialista"],[1,"turnos"],["class","turno",4,"ngFor","ngForOf"],[3,"click"],[1,"turno"],[3,"click",4,"ngIf"]],template:function(i,a){i&1&&(c(0,"div",0)(1,"div",1),p(2,k,2,1,"button",2),r(),c(3,"div",3),p(4,P,2,1,"button",2),r()(),c(5,"div",4),p(6,V,13,9,"div",5),r()),i&2&&(s(2),m("ngForOf",a.especialidades),s(2),m("ngForOf",a.especialistas),s(2),m("ngForOf",a.turnosFiltrados))},dependencies:[T,y,I,M],styles:["h2[_ngcontent-%COMP%]{color:#333;text-align:center}div[_ngcontent-%COMP%]{margin-bottom:10px}label[_ngcontent-%COMP%]{margin-right:5px}input[type=text][_ngcontent-%COMP%]{margin-right:10px;padding:5px;border:1px solid #ccc;border-radius:4px}.turno[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;margin-bottom:10px;border-radius:4px}.turno[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}"]});let n=o;return n})();export{j as a};
