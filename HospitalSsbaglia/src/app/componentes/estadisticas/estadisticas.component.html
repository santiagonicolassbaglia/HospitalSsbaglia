<div class="estadisticas-container">
  <h2 class="estadisticas-title">Estadísticas Generales</h2>

  <!-- Cantidad de turnos por especialidad -->
  <div class="estadistica">
    <h3>Cantidad de turnos por especialidad</h3>
    <button class="btn-ver" appCambiarFondo (click)="obtenerTurnosPorEspecialidad()">Ver Turnos por Especialidad</button>
    <div *ngIf="mostrarTurnosPorEspecialidad" class="estadisticas-table-container">
      <table class="estadisticas-table">
        <thead>
          <tr>
            <th>Especialidad</th>
            <th>Cantidad</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let especialidad of turnosPorEspecialidad | keyvalue | ordenarDatos: 'key'">
            <td>{{ especialidad.key }}</td>
            <td>{{ especialidad.value }}</td>
          </tr>
        </tbody>
      </table>
      <div class="chart-container">
        <canvas id="chartEspecialidad"></canvas>
      </div>
    </div>
  </div>

  <!-- Cantidad de turnos por día -->
  <div class="estadistica">
    <h3>Cantidad de turnos por día</h3>
    <button class="btn-ver" appCambiarFondo appMostrarOcultar (click)="obtenerTurnosPorDia()">Ver Turnos por Día</button>
    <div *ngIf="mostrarTurnosPorDia" class="estadisticas-table-container">
      <table class="estadisticas-table">
        <thead>
          <tr>
            <th>Día</th>
            <th>Cantidad</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dia of turnosPorDia | keyvalue | ordenarDatos: 'key'">
            <td>{{ dia.key }}</td>
            <td>{{ dia.value }}</td>
          </tr>
        </tbody>
      </table>
      <div class="chart-container">
        <canvas id="chartDia"></canvas>
      </div>
    </div>
  </div>

  <!-- Cantidad de turnos solicitados por médico -->
  <div class="estadistica">
    <h3>Cantidad de turnos solicitados por médico</h3>
    <button class="btn-ver" appCambiarFondo (click)="obtenerTurnosPorMedico('solicitados')">Ver Turnos Solicitados</button>
    <div *ngIf="mostrarTurnosPorMedicoSolicitados" class="estadisticas-table-container">
      <table class="estadisticas-table">
        <thead>
          <tr>
            <th>Médico</th>
            <th>Cantidad</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let medico of turnosPorMedicoSolicitados | keyvalue | ordenarDatos: 'key'">
            <td>{{ medico.key }}</td>
            <td>{{ medico.value }}</td>
          </tr>
        </tbody>
      </table>
      <div class="chart-container">
        <canvas id="chartMedicoSolicitados"></canvas>
      </div>
    </div>
  </div>

  <!-- Cantidad de turnos finalizados por médico -->
  <div class="estadistica">
    <h3>Cantidad de turnos finalizados por médico</h3>
    <button class="btn-ver" appCambiarFondo (click)="obtenerTurnosFinalizadosPorMedico('finalizados')">Ver Turnos Finalizados</button>
    <div *ngIf="mostrarTurnosFinalizadosPorMedico" class="estadisticas-table-container">
      <table class="estadisticas-table">
        <thead>
          <tr>
            <th>Médico</th>
            <th>Cantidad</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let medico of turnosFinalizadosPorMedico | keyvalue | ordenarDatos: 'key'">
            <td>{{ medico.key }}</td>
            <td>{{ medico.value }}</td>
          </tr>
        </tbody>
      </table>
      <div class="chart-container">
        <canvas id="chartMedicoFinalizados"></canvas>
      </div>
    </div>
  </div>

  <!-- Botones de descarga -->
  <div class="estadistica download-buttons">
    <button class="btn-descargar" (click)="descargarEstadisticasPDF()">Descargar todas las estadísticas en PDF</button>
    <button class="btn-descargar" (click)="descargarEstadisticasExcel()">Descargar todas las estadísticas en Excel</button>
  </div>
</div>
