<div class="filtros">
  <div class="filtro-especialidad">
    <button *ngFor="let especialidad of especialidades" (click)="filtroEspecialidad = especialidad; aplicarFiltro()">
      {{ especialidad }}
    </button>
  </div>
  <div class="filtro-paciente">
    <button *ngFor="let paciente of pacientes" (click)="filtroPaciente = paciente.id; aplicarFiltro()">
      {{ paciente.nombre }}
    </button>
  </div>
</div>

<div *ngFor="let turno of turnosFiltrados" class="turno">
  <p>Especialidad: {{ turno.especialidad }}</p>
  <p>Paciente: {{ turno.pacienteNombre }}</p>
  <p>Fecha y Hora: {{ turno.fechaHora | date:'dd/MM/yyyy HH:mm' }}</p>
  <p>Estado: {{ turno.estado }}</p>

  <button *ngIf="turno.estado !== 'realizado' && turno.estado !== 'cancelado'" (click)="cancelarTurno(turno, 'Razón de cancelación')">Cancelar Turno</button>
  <button *ngIf="turno.estado === 'pendiente'" (click)="rechazarTurno(turno, 'Razón de rechazo')">Rechazar Turno</button>
  <button *ngIf="turno.estado === 'pendiente'" (click)="aceptarTurno(turno)">Aceptar Turno</button>
  <button *ngIf="turno.estado === 'confirmado'" (click)="finalizarTurno(turno, 'Reseña de la consulta y diagnóstico')">Finalizar Turno</button>
  
  <button *ngIf="turno.comentario && !turno.mostrarresenia" (click)="verResenia(turno)">Ver Reseña</button>
  
  <div *ngIf="turno.mostrarresenia">
    <p>Reseña: {{ turno.comentario }}</p>
    <button (click)="turno.mostrarresenia = false">Ocultar Reseña</button>
  </div>
</div>