<div>
  <h2>Mis Turnos</h2>

  <div>
    <label>Filtrar por especialidad:</label>
    <input [(ngModel)]="filtroEspecialidad" name="filtroEspecialidad" (input)="filtrarTurnos()" type="text">
    <label>Filtrar por especialista:</label>
    <input [(ngModel)]="filtroEspecialista" name="filtroEspecialista" (input)="filtrarTurnos()" type="text">
  </div>

  <div *ngFor="let turno of turnosFiltrados">
    <div class="turno">
      <p>Especialidad: {{ turno.especialidad }}</p>
      <p>Especialista: {{ especialistas[turno.especialista]?.nombre }} {{ especialistas[turno.especialista]?.apellido }}</p>
      <p>Fecha: {{ turno.fecha | date }}</p>
      <p>Estado: {{ turno.estado }}</p>

      <div *ngIf="turno.estado !== 'cancelado'">
        <button (click)="mostrarModalCancelar(turno)">Cancelar Turno</button>
      </div>
      <div *ngIf="turno.estado === 'cancelado'">
        <p>Motivo de cancelación: {{ turno.comentario }}</p>
      </div>

      <button *ngIf="turno.resenia" (click)="verResenia(turno)">Ver Reseña</button>
      <button *ngIf="puedeCompletarEncuesta(turno)" (click)="completarEncuesta(turno)">Completar Encuesta</button>
      <button *ngIf="puedeCalificarAtencion(turno)" (click)="calificarAtencion(turno)">Calificar Atención</button>
    </div>
  </div>

  <!-- Modal de cancelar turno -->
  
</div>
